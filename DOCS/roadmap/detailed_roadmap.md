# House Design AI 詳細ロードマップ
## 最終更新日: 2025年4月28日

## 1. 概要

このドキュメントは、House Design AIプロジェクトの詳細な開発ロードマップを提供します。短期、中期、長期の目標と、各フェーズで実装すべき機能を詳細に説明します。

## 2. 短期目標（1-2週間）

### 2.1 FreeCAD API統合の完了

- **目的**: FreeCAD APIの完全実装と安定化
- **現状**: 基本的なAPIエンドポイントは実装済み、Cloud Runでの動作確認済み
- **タスク**:
  - ✅ FreeCADのDockerコンテナ化
  - ✅ FastAPIベースのFreeCAD APIサービス
  - ✅ グリッドデータ処理エンドポイント
  - ✅ 2D図面変換エンドポイント
  - ✅ Cloud RunへのFreeCAD APIデプロイ
  - ✅ Cloud StorageでのFCStdモデル保存
  - 🟡 エラーハンドリングの強化
  - 🟡 パフォーマンス最適化
  - 🟡 APIドキュメントの整備

### 2.2 StreamlitアプリケーションのCloud Runデプロイ

- **目的**: StreamlitアプリケーションをCloud Runにデプロイし、パブリックアクセスを可能にする
- **現状**: ローカル環境での動作確認済み、PyTorchとの互換性問題は解決済み
- **タスク**:
  - ✅ StreamlitアプリケーションのDockerコンテナ化
  - ✅ PyTorchとStreamlitの互換性問題の解決
  - 🟡 Cloud Runへのデプロイ
  - 🟡 環境変数の設定
  - 🟡 認証機能の実装
  - 🟡 UIの改良

### 2.3 ドキュメントの整備

- **目的**: プロジェクトドキュメントの整理と更新
- **現状**: 基本的なドキュメントは存在するが、最新の実装状況を反映していない
- **タスク**:
  - ✅ ドキュメント構造の整理
  - ✅ FreeCAD API実装の詳細を追加
  - ✅ デプロイメントガイドの更新
  - ✅ 貢献ガイドの整備
  - 🟡 APIドキュメントの作成
  - 🟡 チュートリアルの作成

## 3. 中期目標（2-4週間）

### 3.1 Vertex AI統合の実装

- **目的**: YOLOv11モデルをVertex AIに統合し、スケーラブルな推論環境を構築
- **現状**: ローカル環境でのモデル実行は可能、Vertex AI統合は未実装
- **タスク**:
  - 🟡 Vertex AIエンドポイントのセットアップ
  - 🟡 モデルのVertex AIへのデプロイ
  - 🟡 推論パイプラインの構築
  - 🟡 パフォーマンス最適化
  - 🟡 コスト最適化

### 3.2 建築基準法チェック機能の実装

- **目的**: 生成された建物レイアウトが建築基準法に準拠しているかを自動的にチェック
- **現状**: 基本的なセットバック計算は実装済み、詳細なチェックは未実装
- **タスク**:
  - 🟡 建ぺい率・容積率チェック
  - 🟡 日影規制チェック
  - 🟡 高さ制限チェック
  - 🟡 接道義務チェック
  - 🟡 防火地域規制チェック

### 3.3 建具記号ライブラリの作成

- **目的**: CAD図面に使用する標準的な建具記号のライブラリを作成
- **現状**: 基本的な壁・開口部の描画は可能、標準的な建具記号は未実装
- **タスク**:
  - 🟡 ドア記号の作成
  - 🟡 窓記号の作成
  - 🟡 建具表の作成
  - 🟡 FreeCADでの記号表現の実装
  - 🟡 記号配置アルゴリズムの実装

### 3.4 タイトルブロックテンプレートの設計

- **目的**: CAD図面に使用する標準的なタイトルブロックのテンプレートを作成
- **現状**: 基本的な図面生成は可能、タイトルブロックは未実装
- **タスク**:
  - 🟡 タイトルブロックのデザイン
  - 🟡 プロジェクト情報の自動入力
  - 🟡 縮尺・方位の表示
  - 🟡 凡例の作成
  - 🟡 FreeCADでの実装

## 4. 長期目標（1-2ヶ月）

### 4.1 YOLOv12への移行

- **目的**: YOLOv11からYOLOv12への移行を計画し、セグメンテーション精度を向上
- **現状**: YOLOv11を使用中、YOLOv12への移行は未計画
- **タスク**:
  - 🟡 YOLOv12の調査と評価
  - 🟡 データセットの拡充
  - 🟡 モデルの再トレーニング
  - 🟡 評価指標の改善
  - 🟡 移行計画の詳細化

### 4.2 高度な建物解析機能

- **目的**: より高度な建物解析機能を実装し、最適な建物配置を提案
- **現状**: 基本的な建物セグメンテーションと間取り生成は可能、高度な解析は未実装
- **タスク**:
  - 🟡 日照解析
  - 🟡 風通し解析
  - 🟡 エネルギー効率解析
  - 🟡 コスト最適化
  - 🟡 ユーザー好みの学習

### 4.3 リアルタイム処理の実装

- **目的**: 処理時間を短縮し、リアルタイムでのフィードバックを可能に
- **現状**: 処理に数分を要する、リアルタイム処理は未実装
- **タスク**:
  - 🟡 処理パイプラインの最適化
  - 🟡 並列処理の実装
  - 🟡 キャッシュ機構の実装
  - 🟡 インクリメンタル更新の実装
  - 🟡 UIのリアルタイム更新

### 4.4 モバイルアプリの開発

- **目的**: モバイルデバイスからのアクセスを可能にし、現場での利用を促進
- **現状**: Webアプリケーションのみ、モバイルアプリは未計画
- **タスク**:
  - 🟡 モバイルアプリの設計
  - 🟡 APIの拡張
  - 🟡 オフライン機能の実装
  - 🟡 カメラ統合
  - 🟡 位置情報の活用

## 5. 成功指標

### 5.1 技術的指標

1. **セグメンテーション精度**
   - 目標: mAP > 0.85
   - 現状: mAP = 0.78

2. **処理時間**
   - 目標: < 60秒
   - 現状: 約180秒

3. **FreeCAD安定性**
   - 目標: エラー率 < 1%
   - 現状: エラー率 約5%

4. **クラウド最適化**
   - 目標: コスト < $100/月
   - 現状: 約$150/月

### 5.2 ユーザー指標

1. **ユーザー満足度**
   - 目標: > 4.5/5
   - 現状: 未測定

2. **処理成功率**
   - 目標: > 95%
   - 現状: 約85%

3. **アクティブユーザー数**
   - 目標: > 100/月
   - 現状: 約20/月

## 6. リスク管理

### 6.1 技術的リスク

1. **FreeCADのクラウド環境での安定性**
   - リスク評価: 中
   - 対策: コンテナ化とエラーハンドリングの強化
   - 代替案: ローカル処理の検討

2. **処理時間とコスト**
   - リスク評価: 高
   - 対策: 非同期処理とバッチ処理の実装
   - 代替案: 処理の分割と最適化

3. **YOLOv12への移行リスク**
   - リスク評価: 中
   - 対策: 段階的な移行計画
   - 代替案: YOLOv11の継続使用

### 6.2 プロジェクトリスク

1. **チーム規模（2名）に対するタスク量**
   - リスク評価: 高
   - 対策: 優先順位の明確化
   - 代替案: 外部リソースの活用

2. **スケジュールの遅延**
   - リスク評価: 中
   - 対策: アジャイル開発手法の採用
   - 代替案: スコープの調整

## 7. 結論

このロードマップは、House Design AIプロジェクトの短期、中期、長期の目標と実装計画を詳細に説明しています。FreeCAD APIの完全実装とStreamlitアプリケーションのCloud Runデプロイを短期的な優先事項とし、Vertex AI統合と建築基準法チェック機能を中期的な目標としています。長期的には、YOLOv12への移行と高度な建物解析機能の実装を計画しています。

このロードマップは、プロジェクトの進捗に応じて定期的に更新されます。
