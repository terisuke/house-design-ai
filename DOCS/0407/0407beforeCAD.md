# 土地図から建物形状・間取りを自動生成するシステム

このドキュメントでは、土地図をアップロードするとAIが建物の形状と間取りを自動的に作成するシステムの仕組みを説明します。

## システムの全体の流れ

1. **土地図のアップロード**: ユーザーが土地の図面をアップロード
2. **AI分析**: システムが土地と周辺の道路を自動認識
3. **建物形状の生成**: 法律に合った建物の形を決定
4. **間取り作成**: 最適な部屋の配置を決定
5. **CAD図面出力**: 専門的な建築図面の作成

## 詳細プロセス

### 1. 土地と道路の認識

- **使用技術**: YOLOという画像認識AI
- **処理内容**:
  - 土地の境界線を自動検出
  - 道路の位置を特定
  - 北向きなどの方角情報を認識

### 2. 建築可能な範囲の計算

- **セットバック処理**:
  - 道路からは一定距離を離す
  - 敷地境界からも一定の距離を確保
- **法律チェック**:
  - 道路斜線制限（道路から離れるほど高く建てられる）
  - 北側斜線制限（北側の土地に日当たりを確保するため高さ制限あり）
  - 建ぺい率（土地に対して建物が占める割合の上限）
  - 容積率（土地に対して建物の床面積合計の上限）

### 3. 建物形状の決定

- **AIによる形状提案**:
  - 過去の建築事例から学習した最適な建物形を提案
  - 日当たりを最大化する向き
  - 使いやすい間取りができる形状

- **ルールベースでの調整**:
  - 正確に法律に準拠するよう形を調整
  - 構造的に安定する形に整える
  - 建築コストを考慮した形状に調整

### 4. 間取り作成

- **グリッド設計**:
  - 建物内部を910mm×910mm（半畳サイズ）のマス目に区切る
  - このサイズは建築の基準寸法として一般的

- **部屋配置の決定**:
  - AIが最適な部屋の配置パターンを提案
  - リビング、キッチン、寝室などの理想的な位置関係を考慮
  - 日当たりや使いやすさを重視した配置

- **調整と最適化**:
  - 廊下や階段の適切な配置
  - 1階と2階の整合性確保
  - 使い勝手の良い動線の確保

### 5. 検証と修正

- **実用性チェック**:
  - ドアの開閉スペースの確認
  - 家具の配置可能性の確認
  - 生活動線の最適化

- **法的要件の最終確認**:
  - 避難経路の確保
  - 窓の必要面積の確認
  - 構造安全性の確認

## 具体的な例：間取り生成プロセス

1. **リビング・ダイニング・キッチン(LDK)の配置**:
   - 南向きの場所を優先
   - 十分な広さ（少なくとも4×4マス以上）を確保
   - 玄関からアクセスしやすい位置に配置

2. **寝室の配置**:
   - プライバシーを確保できる位置
   - リビングから適度に離れた場所
   - 十分な広さ（少なくとも3×4マス）を確保

3. **水回り（お風呂・トイレ）の配置**:
   - 効率的な配管のために近くに集める
   - 寝室からアクセスしやすい位置
   - プライバシーに配慮した位置

4. **廊下と階段**:
   - 最小限のスペースで最大の機能性
   - すべての部屋にアクセスできる動線
   - 2階への効率的な接続

## このシステムの強み

1. **スピード**: 従来の建築士による設計より圧倒的に速い
2. **法令遵守**: 複雑な建築基準法に自動的に準拠
3. **最適化**: 土地形状に合わせた最適な建物設計
4. **柔軟性**: 様々な要望に対応できる複数の案を提示可能
5. **コスト効率**: 設計初期段階のコストと時間を大幅削減

このシステムにより、土地を購入した時点で、その場でどのような家が建てられるかをすぐに確認できるようになります。建築の専門知識がなくても、最適な一軒家の設計案を得ることができます。